
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="kr">

<head>
    <meta charset='utf-8' />
    <link href='calendarapi/lib/main.css' rel='stylesheet' />
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.css' rel='stylesheet' />
    <link href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.1/css/all.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://bootswatch.com/4/lux/bootstrap.min.css">
    <script src='calendarapi/lib/main.js'></script>
    <script>
        function consolelog(log) {
            console.log(log);
        }

/*
        // 종모씨 코드
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                themeSystem: 'bootstrap',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                initialDate: '2020-09-12',
                navLinks: true, // can click day/week names to navigate views
                selectable: true,
                selectMirror: true,
                select: function(arg) {
                    var title = prompt('Event Title:');
                    if (title) {
                        calendar.addEvent({
                            title: title,
                            start: arg.start,
                            end: arg.end,
                            allDay: arg.allDay
                        })
                    }
                    calendar.unselect();
                },
                eventClick: function(arg) {
                    //modal
                    //arg.events
                    alert(arg.event.end);


                },
                editable: true,
                dayMaxEvents: true, // allow "more" link when too many events

                events: [ <
                    %
                    for (ReserveTest r: rt1) {
                        % > {
                            title: '<%=r.getReserveTitle()%>',
                            start: <%=r.getReserveStartDate().getTime() %> ,
                            end: <%=r.getReserveEndDate().getTime() %> ,
                            id: <%=r.getReserveNo() %>
                        }, <
                        %
                    } % >
                ]

            });
            document.getElementById('submitBtn').addEventListener('click', function() {
                var arr = calendar.getEvents();
                var titles = [];
                var startDate = [];
                var endDate = [];
                var reserveNo = [];

                for (var i = 0; i < arr.length; ++i) {
                    console.log(arr[i].title);
                    console.log(arr[i].start);
                    console.log(arr[i].end);

                    titles.push(arr[i].title);
                    startDate.push(arr[i].start);
                    endDate.push(arr[i].end);
                    console.log(arr[i].end);
                    reserveNo.push(arr[i].id);
                }

                var JsonTitles = JSON.stringify(titles);
                var JsonStartDate = JSON.stringify(startDate);
                var JsonEndDate = JSON.stringify(endDate);
                var JsonReserveNo = JSON.stringify(reserveNo);
                $.ajax({
                    type: "get",
                    url: "/test2Form",
                    data: {
                        JsonEndDate: JsonEndDate,
                        JsonStartDate: JsonStartDate,
                        JsonTitles: JsonTitles,
                        JsonReserveNo: JsonReserveNo
                    },
                    dataType: "JSON",
                    beforeSend: function() {
                        $('#loading_indicator').show().fadeIn('fast');
                        $('#submitBtn').hide();
                    },
                    success: function(data) {
                        $("#ajaxResult").html(data);
                    },
                    error: function(data) {
                        $("#ajaxResult").html(data);
                    },
                    complete: function() {
                        $('#loading_indicator').fadeOut();
                        $('#submitBtn').show();
                    }
                });
            });
            calendar.render();

        });
        // 종모씨 코드 
        
        */
        
        

        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                themeSystem: 'bootstrap',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                initialDate: '2020-09-12',
                navLinks: true, // can click day/week names to navigate views
                selectable: true,
                selectMirror: true,
                select: function(arg) {
                    var title = prompt('Event Title:');
                    if (title) {
                        calendar.addEvent({
                            title: title,
                            start: arg.start,
                            end: arg.end,
                            allDay: arg.allDay
                        })
                    }
                    calendar.unselect();
                },
                eventClick: function(arg) {
                    if (confirm('Are you sure you want to delete this event?')) {
                        arg.event.remove()
                    }
                },
                editable: true,
                dayMaxEvents: true, // allow "more" link when too many events
                events: [{
                    title: 'All Day Event',
                    start: '2020-09-01'
                }],
                eventColor: '#A6756A'
            });
            document.getElementById('submitBtn').addEventListener('click', function() {
                var arr = calendar.getEvents();
                for (var i = 0; i < arr.length; ++i) {
                    console.log(arr[i].title);
                    console.log(arr[i].start);
                    console.log(arr[i].end);
                }
            });
            calendar.render();

        });
    </script>
    <style>
        body {
            margin: 40px 10px;
            padding: 0;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            font-size: 14px;
        }

        #calendar {
            max-width: 1100px;
            margin: 0 auto;
        }
    </style>
</head>

<body>

    <div id='calendar' class="fc fc-media-screen fc-direction-ltr fc-theme-bootstrap"></div>
    <br>
    <button id="submitBtn" type="button" class="btn btn-primary">저장하기</button>
    
    
    
    
</body></html>
